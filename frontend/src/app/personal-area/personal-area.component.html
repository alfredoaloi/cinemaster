<app-navbar></app-navbar>
<div id="toastDiv" aria-live="polite" aria-atomic="true" style="position: relative; min-height: 200px;">
  <div class="toast" style="position: absolute; top: 0; right: 0;">
  </div>
</div>
<div class="container">
  <div class="main-body">
    <div class="row gutters-sm">
      <div class="col-md-4 mb-3">
        <div class="card personalCard">
          <div class="card-body">
            <div class="d-flex flex-column align-items-center text-center">
              <img *ngIf="male" src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="Admin" class="rounded-circle" width="150">
              <img *ngIf="!male" src="https://bootdey.com/img/Content/avatar/avatar8.png" alt="Admin" class="rounded-circle" width="150">
              <div class="mt-3">
                <h4>{{personalData.firstName}} {{personalData.lastName}}</h4>
              </div>
            </div>
          </div>
        </div>

      </div>
      <div class="col-md-8">
        <div class="card mb-3">
          <div class="card-body">
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Nome</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input class="e-input" #name value="{{personalData.firstName}}" [readonly]="!modifica">
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Cognome</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input class="e-input" #surname value="{{personalData.lastName}}" [readonly]="!modifica">
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Nome utente</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input class="e-input" #username value="{{personalData.username}}" [readonly]="!modifica">
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Email</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input class="e-input" #email value="{{personalData.email}}" [readonly]="!modifica">
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Data di nascita</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input class="e-input" type="date" #birthDate value="{{personalData.birthdate}}" [readonly]="!modifica">
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Password</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input class="e-input" type="password" #password value="********" [readonly]="!modificaPassword">
              </div>
            </div>
            <hr>
            <div class="row">
              <div class="col-sm-3">
                <h6 class="mb-0">Sesso</h6>
              </div>
              <div class="col-sm-9 text-secondary">
                <input class="e-input" #gender value="{{personalData.gender}}" [readonly]="!modifica">
              </div>
              <div class="col-sm-5">
                <button ejs-button *ngIf="!modifica && !modificaPassword" class="btn" (click)="modificaDati()">Modifica dati</button>
                <button ejs-button *ngIf="!modificaPassword && !modifica" class="btn" (click)="modificaPass()">Modifica password</button>
                <button ejs-button *ngIf="modifica" class="btn" (click)="salvaDati(name.value,surname.value,username.value,email.value,birthDate.value,gender.value)">Salva dati</button>
                <button ejs-button *ngIf="modificaPassword" class="btn" (click)="salvaPassword(password.value)">Salva password</button>

              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
<div class="row gutters-sm">
  <div class="card">
    <h5 class="panel-title centro">Prenotazioni effettuate</h5>
    <div class="card-body">
      <ejs-grid #grid  [dataSource]='data' [enableInfiniteScrolling]='true' height='40vh' [pageSettings]='pageSettings'
                 [editSettings]='editSettings'  allowTextWrap='true' (actionBegin)="actionBegin($event)">
        <e-columns>
          <e-column field='bookingId' headerText='Id' width='50' textAlign='Center' isPrimaryKey="true"></e-column>
          <e-column field='showName' headerText='Nome' width='180' textAlign='Center' ></e-column>
          <e-column field='roomName' headerText='Sala' textAlign='Center' width='100' ></e-column>
          <e-column field='seat' headerText='Posto' textAlign='Center' width='150' ></e-column>
          <e-column field='date' headerText='Data' type="date" format="yMd" width='160'  textAlign='Center'></e-column>
          <e-column field='startTime' headerText='Ora inizio' width='70'  textAlign='Center'></e-column>
          <e-column field='price' headerText='Prezzo' width='80'   textAlign='Center'></e-column>
          <e-column headerText='Modifica' width='160' [commands]='commands'></e-column>
        </e-columns>
      </ejs-grid>
    </div>
  </div>
</div>
